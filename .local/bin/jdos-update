#!/bin/bash

# The script will update all of the configurations of JDOS.
# Be sure that you have already installed JDOS.

# Author: Jom Dollesin 
# Email: codewithjom@gmail.com

if [[ $(ls $HOME | grep .jdos-update) = 'jdos-update' ]]; then
  echo ":: There is nothing to do!"
else
  mkdir $HOME/.jdos-update
fi

# DOTFILES
git clone https://github.com/codewithjom/dotfiles.git $HOME/.jdos-update/dotfiles
count=$(cd $HOME/.dotfiles;git log --oneline | wc -l;cd)

if [[ $count = $(cd $HOME/.jdos-update/dotfiles;git rev-list --count HEAD;cd) ]]; then

  echo ":: JDOS is up to date. Nothing to do here!"
  rm -rf $HOME/.jdos-update

else
  
  cd $HOME/.jdos-update/dotfiles
  cp -rf .* ~/.dotfiles
  cd $HOME/.dotfiles/
  cp -rf .* ~/
  rm -rf ~/.git ~/LICENSE ~/.stow-local-ignore
  rm -rf $HOME/.jdos-update
  echo ":: JDOS is successfully updated!"
  
fi
